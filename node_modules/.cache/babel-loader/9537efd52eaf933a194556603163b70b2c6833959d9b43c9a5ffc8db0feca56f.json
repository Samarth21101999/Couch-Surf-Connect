{"ast":null,"code":"var _jsxFileName = \"D:\\\\MERN Stack Project\\\\CouchSurfConnect\\\\client\\\\src\\\\components\\\\user\\\\GoogleOneTapLogin.js\",\n  _s = $RefreshSig$();\nimport { Google } from '@mui/icons-material';\nimport React from 'react';\nimport { useState } from 'react';\nimport { useValue } from '../../context/ContextProvider';\nimport { Button } from '@mui/material';\nimport { jwtDecode } from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GoogleOneTapLogin = () => {\n  _s();\n  const [disabled, setDisabled] = useState(false);\n  const {\n    dispatch\n  } = useValue();\n  const handleResponse = response => {\n    const token = response.credential;\n    const decodedToken = jwtDecode(token);\n    const {\n      sub: id,\n      email,\n      name,\n      picture: imageURL\n    } = decodedToken;\n    dispatch({\n      type: 'UPDATE_USER',\n      payload: {\n        id,\n        email,\n        name,\n        imageURL\n      }\n    });\n    dispatch({\n      type: 'CLOSE_LOGIN'\n    });\n  };\n  const handleGoogleLogin = () => {\n    setDisabled(true);\n    try {\n      window.google.accounts.id.initialize({\n        client_id: \"257518355050-o7s9b68505qn3fseclh0fqj2q7q8fds0.apps.googleusercontent.com\",\n        callback: handleResponse\n      });\n      window.google.accounts.id.prompt(notification => {\n        if (notification.isNotDisplayed()) {\n          throw new Error('Try to clear the cookies or try again later!');\n        } else if (notification.isSkippedMoment() || notification.isDismissedMoment()) {\n          setDisabled(false);\n        }\n      });\n    } catch (err) {\n      dispatch({\n        type: 'UPDATE_ALERT',\n        payload: {\n          open: true,\n          severity: 'error',\n          message: err.message\n        }\n      });\n      console.log(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Button, {\n    variant: \"outlined\",\n    startIcon: /*#__PURE__*/_jsxDEV(Google, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 16\n    }, this),\n    disabled: disabled,\n    onClick: handleGoogleLogin,\n    children: \"Login With Google\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(GoogleOneTapLogin, \"LdkGvtv9y5xV4RhG5CW98hhdZcA=\", false, function () {\n  return [useValue];\n});\n_c = GoogleOneTapLogin;\nexport default GoogleOneTapLogin;\nvar _c;\n$RefreshReg$(_c, \"GoogleOneTapLogin\");","map":{"version":3,"names":["Google","React","useState","useValue","Button","jwtDecode","jsxDEV","_jsxDEV","GoogleOneTapLogin","_s","disabled","setDisabled","dispatch","handleResponse","response","token","credential","decodedToken","sub","id","email","name","picture","imageURL","type","payload","handleGoogleLogin","window","google","accounts","initialize","client_id","callback","prompt","notification","isNotDisplayed","Error","isSkippedMoment","isDismissedMoment","err","open","severity","message","console","log","variant","startIcon","fileName","_jsxFileName","lineNumber","columnNumber","onClick","children","_c","$RefreshReg$"],"sources":["D:/MERN Stack Project/CouchSurfConnect/client/src/components/user/GoogleOneTapLogin.js"],"sourcesContent":["import { Google } from '@mui/icons-material'\r\nimport React from 'react'\r\nimport { useState } from 'react'\r\nimport { useValue } from '../../context/ContextProvider'\r\nimport { Button } from '@mui/material'\r\nimport {jwtDecode} from 'jwt-decode'\r\nconst GoogleOneTapLogin = () => {\r\n  const [disabled, setDisabled] = useState(false);\r\n  const {dispatch} = useValue();\r\n\r\n  const handleResponse=(response)=>{\r\n    const token=response.credential;\r\n    const decodedToken=jwtDecode(token);\r\n    const {sub:id, email, name, picture:imageURL}=decodedToken;\r\n    dispatch({\r\n      type:'UPDATE_USER',\r\n      payload:{\r\n        id,\r\n        email,\r\n        name,\r\n        imageURL\r\n      }\r\n    })\r\n    dispatch({\r\n      type:'CLOSE_LOGIN',\r\n    })\r\n  }\r\n\r\n  const handleGoogleLogin = () => {\r\n    setDisabled(true);\r\n    try{\r\n      window.google.accounts.id.initialize({\r\n        client_id:\"257518355050-o7s9b68505qn3fseclh0fqj2q7q8fds0.apps.googleusercontent.com\",\r\n        callback: handleResponse\r\n      });\r\n      window.google.accounts.id.prompt((notification) => {\r\n        if(notification.isNotDisplayed()){\r\n          throw new Error('Try to clear the cookies or try again later!');\r\n        }\r\n        else if(notification.isSkippedMoment() || notification.isDismissedMoment()){\r\n          setDisabled(false);\r\n        }\r\n\r\n      })\r\n    }\r\n    catch(err){\r\n      dispatch({\r\n        type:'UPDATE_ALERT',\r\n        payload:{\r\n          open:true,\r\n          severity:'error',\r\n          message:err.message\r\n        }\r\n      })\r\n      console.log(err);\r\n    }\r\n  }\r\n  return (\r\n    <Button variant='outlined'\r\n    startIcon={<Google/>}\r\n    disabled={disabled}\r\n    onClick={handleGoogleLogin}\r\n   >\r\n     Login With Google\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default GoogleOneTapLogin"],"mappings":";;AAAA,SAASA,MAAM,QAAQ,qBAAqB;AAC5C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,OAAO;AAChC,SAASC,QAAQ,QAAQ,+BAA+B;AACxD,SAASC,MAAM,QAAQ,eAAe;AACtC,SAAQC,SAAS,QAAO,YAAY;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACpC,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM;IAACU;EAAQ,CAAC,GAAGT,QAAQ,CAAC,CAAC;EAE7B,MAAMU,cAAc,GAAEC,QAAQ,IAAG;IAC/B,MAAMC,KAAK,GAACD,QAAQ,CAACE,UAAU;IAC/B,MAAMC,YAAY,GAACZ,SAAS,CAACU,KAAK,CAAC;IACnC,MAAM;MAACG,GAAG,EAACC,EAAE;MAAEC,KAAK;MAAEC,IAAI;MAAEC,OAAO,EAACC;IAAQ,CAAC,GAACN,YAAY;IAC1DL,QAAQ,CAAC;MACPY,IAAI,EAAC,aAAa;MAClBC,OAAO,EAAC;QACNN,EAAE;QACFC,KAAK;QACLC,IAAI;QACJE;MACF;IACF,CAAC,CAAC;IACFX,QAAQ,CAAC;MACPY,IAAI,EAAC;IACP,CAAC,CAAC;EACJ,CAAC;EAED,MAAME,iBAAiB,GAAGA,CAAA,KAAM;IAC9Bf,WAAW,CAAC,IAAI,CAAC;IACjB,IAAG;MACDgB,MAAM,CAACC,MAAM,CAACC,QAAQ,CAACV,EAAE,CAACW,UAAU,CAAC;QACnCC,SAAS,EAAC,0EAA0E;QACpFC,QAAQ,EAAEnB;MACZ,CAAC,CAAC;MACFc,MAAM,CAACC,MAAM,CAACC,QAAQ,CAACV,EAAE,CAACc,MAAM,CAAEC,YAAY,IAAK;QACjD,IAAGA,YAAY,CAACC,cAAc,CAAC,CAAC,EAAC;UAC/B,MAAM,IAAIC,KAAK,CAAC,8CAA8C,CAAC;QACjE,CAAC,MACI,IAAGF,YAAY,CAACG,eAAe,CAAC,CAAC,IAAIH,YAAY,CAACI,iBAAiB,CAAC,CAAC,EAAC;UACzE3B,WAAW,CAAC,KAAK,CAAC;QACpB;MAEF,CAAC,CAAC;IACJ,CAAC,CACD,OAAM4B,GAAG,EAAC;MACR3B,QAAQ,CAAC;QACPY,IAAI,EAAC,cAAc;QACnBC,OAAO,EAAC;UACNe,IAAI,EAAC,IAAI;UACTC,QAAQ,EAAC,OAAO;UAChBC,OAAO,EAACH,GAAG,CAACG;QACd;MACF,CAAC,CAAC;MACFC,OAAO,CAACC,GAAG,CAACL,GAAG,CAAC;IAClB;EACF,CAAC;EACD,oBACEhC,OAAA,CAACH,MAAM;IAACyC,OAAO,EAAC,UAAU;IAC1BC,SAAS,eAAEvC,OAAA,CAACP,MAAM;MAAA+C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAE;IACrBxC,QAAQ,EAAEA,QAAS;IACnByC,OAAO,EAAEzB,iBAAkB;IAAA0B,QAAA,EAC3B;EAEA;IAAAL,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;AAEb,CAAC;AAAAzC,EAAA,CA5DKD,iBAAiB;EAAA,QAEFL,QAAQ;AAAA;AAAAkD,EAAA,GAFvB7C,iBAAiB;AA8DvB,eAAeA,iBAAiB;AAAA,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}